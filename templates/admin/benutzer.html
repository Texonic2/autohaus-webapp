{% extends "base.html" %}
{% block title %}Benutzerverwaltung – Admin{% endblock %}

{% block content %}
<h2>Benutzerverwaltung</h2>
<a href="{{ url_for('benutzer_anlegen') }}">
  <button>➕ Benutzer anlegen</button>
</a>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Vorname</th>
      <th>Nachname</th>
      <th>E-Mail</th>
      <th>Rolle</th>
      <th>Aktionen</th>
    </tr>
  </thead>
  <tbody>
    {% for user in benutzerliste %}
    <tr>
      <td>{{ user.User_ID }}</td>
      <form method="post" style="display: contents;">
        <input type="hidden" name="user_id" value="{{ user.User_ID }}">

        <td><input type="text" name="vorname" value="{{ user.vorname }}" required></td>
        <td><input type="text" name="nachname" value="{{ user.nachname }}" required></td>
        <td>{{ user.email }}</td>

        <td>
          <select name="rolle">
            <option value="customer" {% if user.role == 'customer' %}selected{% endif %}>Kunde</option>
            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
          </select>
        </td>

        <td>
          <button type="submit" name="aktion" value="daten_aendern">Speichern</button>
          <button type="submit" name="aktion" value="loeschen" onclick="return confirm('Benutzer wirklich löschen?')">Löschen</button>
        </td>
      </form>
    </tr>
    {% endfor %}
  </tbody>
</table>


{% endblock %}
