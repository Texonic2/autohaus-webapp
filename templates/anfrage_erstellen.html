{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/anfrage_erstellen.css') }}">

<div class="anfrage-wrapper">
    <h2>ðŸ“„ Finanzierungsanfrage erstellen</h2>
    <form method="POST">

        <!-- Auto-ID -->
        <label class="anfrage-label">Auto-ID eingeben:</label>
        <input type="number" name="auto_id" class="anfrage-input"
               value="{{ auto_id or request.form.auto_id or '' }}" required placeholder="z.â€¯B. 3">

        {% if preis %}
            <div class="anfrage-info">
                Fahrzeugpreis: {{ preis }} â‚¬
            </div>

            <!-- Finanzierung -->
            <label class="anfrage-label">Finanzierungsdauer (Monate):</label>
            <input type="number" name="laufzeit" min="1" class="anfrage-input"
                   value="{{ laufzeit or request.form.laufzeit or '' }}" required>

            <label class="anfrage-label">Startzahlung (â‚¬):</label>
            <input type="number" name="anzahlung" step="0.01" class="anfrage-input"
                   value="{{ anzahlung or request.form.anzahlung or '' }}" required>

            <label class="anfrage-label">Endzahlung (Schlussrate) (â‚¬):</label>
            <input type="number" name="schlussrate" step="0.01" class="anfrage-input"
                   value="{{ schlussrate or request.form.schlussrate or '' }}" required>
        {% endif %}

        {% if rate %}
            <div class="anfrage-info">
                Monatliche Rate: {{ rate }} â‚¬
            </div>

            <!-- Kunden-E-Mail -->
            <label class="anfrage-label">Kunden-E-Mail-Adresse:</label>
            <input type="email" name="email" class="anfrage-input"
                   value="{{ request.form.email or '' }}" required>

            <!-- Terminwunsch -->
            <label class="anfrage-label">Terminwunsch (Datum & Uhrzeit):</label>
            <input type="datetime-local" name="terminwunsch" class="anfrage-input"
                   value="{{ request.form.terminwunsch or '' }}" required>
        {% endif %}

        {% if fehler %}
            <p class="anfrage-error">{{ fehler }}</p>
        {% endif %}

        <button type="submit" class="anfrage-button">
            {% if rate and preis %}
                âœ… Anfrage abschicken
            {% else %}
                Weiter
            {% endif %}
        </button>
    </form>
</div>
{% endblock %}