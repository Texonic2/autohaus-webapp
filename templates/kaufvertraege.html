{% extends "base.html" %}

{% block title %}ðŸ“„ KaufvertrÃ¤ge{% endblock %}

{% block content %}
<h2 class="admin-title">ðŸ“„ Alle KaufvertrÃ¤ge</h2>

<div class="table-container">
  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Info</th>
        <th>Monate</th>
        <th>Anzahlung</th>
        <th>Schlussrate</th>
        <th>Monatliche Rate</th>
        <th>Datum</th>
        <th>PDF</th>
        <th>Vorname</th>
        <th>Nachname</th>
        <th>Email</th>
        <th>Marke</th>
        <th>Modell</th>
        <th>Preis</th>
        <th>Aktion</th>
      </tr>
    </thead>
    <tbody>
      {% for vertrag in vertraege %}
      <tr>
        <td>{{ vertrag.Kaufvertrag_ID or '-' }}</td>
        <td>{{ vertrag.Info or '-' }}</td>
        <td>{{ vertrag.Monate or '-' }}</td>
        <td>{{ vertrag.Anzahlung if vertrag.Anzahlung is not none else '-' }} â‚¬</td>
        <td>{{ vertrag.Schlussrate if vertrag.Schlussrate is not none else '-' }} â‚¬</td>
        <td>
          {% if vertrag.Monatliche_Rate is not none %}
            {{ vertrag.Monatliche_Rate | round(2) }} â‚¬
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ vertrag.Datum_Erstellung or '-' }}</td>
        <td>
          {% if vertrag.PDF_Pfad %}
            <a href="/static/{{ vertrag.PDF_Pfad }}" target="_blank" class="pdf-link">ðŸ“„ Ã¶ffnen</a>
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ vertrag.vorname or '-' }}</td>
        <td>{{ vertrag.nachname or '-' }}</td>
        <td>{{ vertrag.email or '-' }}</td>
        <td>{{ vertrag.marke or '-' }}</td>
        <td>{{ vertrag.modell or '-' }}</td>
        <td>{{ vertrag.preis or '-' }} â‚¬</td>
        <td>
          <form action="{{ url_for('kaufvertrag_loeschen', vertrag_id=vertrag.Kaufvertrag_ID) }}" method="post" style="display:inline;">
            <button type="submit" class="btn-aktion btn-loeschen" onclick="return confirm('Diesen Kaufvertrag wirklich lÃ¶schen?')">LÃ¶schen</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}