<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Registrieren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}" />
  <script>
    function togglePassword() {
      const password = document.getElementById("password");
      const icon = document.getElementById("toggle-icon");
      if (password.type === "password") {
        password.type = "text";
        icon.src = "https://img.icons8.com/ios-filled/50/000000/visible.png";
      } else {
        password.type = "password";
        icon.src = "https://img.icons8.com/ios-filled/50/000000/invisible.png";
      }
    }
  </script>
</head>
<body>
  <div class="login-container">
    <h2>Registrieren</h2>

    <!-- Anzeige der Fehlermeldung, wenn die E-Mail bereits registriert ist -->
    {% if error_message %}
      <p class="error-message">{{ error_message }}</p>
    {% endif %}

    <!-- Formular zur Registrierung -->
    <form action="{{ url_for('registration') }}" method="POST">
      <!-- Vorname -->
      <label for="firstname">Vorname</label>
      <input type="text" id="firstname" name="firstname" placeholder="Max" required />

      <!-- Nachname -->
      <label for="lastname">Nachname</label>
      <input type="text" id="lastname" name="lastname" placeholder="Mustermann" required />

      <!-- E-Mail -->
      <label for="email">E-Mail</label>
      <input type="email" id="email" name="email" placeholder="deine@email.de" required />

      <!-- Passwort -->
      <label for="password">Passwort</label>
      <div class="password-wrapper">
        <input type="password" id="password" name="password" placeholder="********" required
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,}$"
          title="Das Passwort muss mindestens 6 Zeichen lang sein, einen Großbuchstaben, einen Kleinbuchstaben und eine Zahl enthalten."/>
        <img id="toggle-icon" class="toggle-icon" onclick="togglePassword()" src="https://img.icons8.com/ios-filled/50/000000/invisible.png" alt="Passwort anzeigen" />
      </div>

      <!-- Verstecktes Feld für den Admin-Status -->
      <input type="hidden" name="role" value="user" id="role" /> <!-- Standardwert 'user' -->

      <!-- Optional: Hier kannst du später ein Dropdown für Admins und normale Nutzer hinzufügen, falls nötig -->
      <!-- Zum Beispiel:
      <label for="role">Rolle</label>
      <select id="role" name="role">
        <option value="user">Benutzer</option>
        <option value="admin">Admin</option>
      </select>
      -->

      <button type="submit">Registrieren</button>
    </form>
    <p class="note">Bereits registriert? <a href="{{ url_for('Login') }}">Zum Login</a></p>
  </div>
</body>
</html>
